## 第三章 Python 语法

语法是编程语言使用的一套基本规则。这些规则主要是Python里用的语法和符号。

为了让计算机理解程序员给它的指令，语法是必须的。没有语法，计算机不能理解程序员要它做的事情。

理解语法是必须的，因为它是编程的基础。不理解语法，就无法与计算机沟通。

这一章介绍Python语法的基础知识。在开始的部分，有几个Minecraft的编程挑战，每一个挑战都要求你有对应的基础知识。所以建议你在开始练习之前，先完成Codecademy 上Python教程，除非你喜欢冒险。如果你不太记得如何使用某一概念，本章已经包括了你在 Codecademy上学到的一切知识。

正如本书的每一章节，你可以用不同的方式使用本章的内容：

* 通过这里的练习来验证你的理解是否正确；
* 当你需要额外的帮助来理解Codecdemy的教程的时候，可以参看本书；
* 当你写程序时，帮助你回忆；
* 当你要考试时，用本书来复习。

本书撰写的目的就是帮助你学习编程的，所以你可以在任何需要的时候用它。

#### 3.1 Minecraft练习

我们来练习变量的使用。这里的每个练习都向你展示了一些使用变量的代码。这些练习会教你如何移动玩家的位置，如何阻止玩家破坏游戏中的块。对每个练习，我们都会告诉你其中的概念和练习的难度。当需要的时候，我们甚至会解释Minecraft的代码。

在做这些练习的时候，注意其中的变量以及它们的用法。这将帮助你理解发生了什么。如果有你不理解的，可以查看前面的章节。

如果你觉得自己以及掌握了，就可以做写扩展练习。你也可以按照自己的创意和想法，尝试修改、重新组合这些代码。

##### 3.1.1 移动玩家

-----------------------------------

**知识与技巧**

本练习中，我们将练习的知识和技巧:

* 变量
* 我的世界的API
* 整数
* 设置玩家的位置
* 坐标
-----------------------------------

让我们开始使用Python和
Minecraft API的第一个程序。我们先做简单的事情，用整数移动玩家到一个新的位置。

你的角色在Minecraft的世界里有一个坐标。由x、y、z这三个数字来表示，你可以在游戏窗口的左上角看到这三个数字。
![图例3.1](3.1.png)
当你移动时会发现这三个数字在变化。这些变量代表着你在Minecraft的3D世界里的坐标。如图 3.1.1 所示: y 表示高度， x，z 代表你在平面上的位置。

用Python代码也可以像用键盘那样，改变你角色的位置。我们将用代码告诉你如何去做。

**指令**

创建一个新文件，并命名为 teleport.py。移动 Minecraft API 文件夹到同一文件夹内，具体的命令参看第二章。

现在在一个文本编辑器中打开 teleport.py 文件。首先，我们需要两行连接我们的程序到 Minecraft的代码。这两行代码会用在所有和Minecraft交互的程序里。添加这两行代码到你的程序顶部:

	1. import mcpi.minecraft as minecraft
	2. mc = minecraft.Minecraft.create()

我们现在将创建表示 x、 y 、z的三个整数变量，这代表我们想把角色移动到的坐标。现在让我们来设置我们目标坐标 (10，11，12)。

	4. x = 10
	5. y = 11
	6. z = 12
	
最后我们需要一行代码移动玩家。

	7. mc.player.setTilePos(x,y,z)

这是一个函数，以后我们会进一步学习函数。现在，你需要知道的是，setTilePos(x,y,z)是告诉Minecraft，把玩家移动到我们用xyz，这三个变量设置的位置上。

下面是完整代码，我们会加一些注释，方便理解：

	1. #connect to Minecraft
	2. import mcpi.minecraft as minecraft
	3. mc = minecraft.Minecraft.create()
	4. 	
	5. ”””set x,y and z variables
	6. to represent coordinates”””
	7. x = 10
	8. y = 11
	9. z = 12
	10. 	
	11. #change the player’s position
	12. mc.player.setTilePos(x,y,z)

现在让我们来运行程序，按下面的步骤做：

1. 打开Minecraft Pi版
2. 打开一个终端并将目录更改到你保存程序的目录
3. 在终端输入：python teleport.py然后回车

**扩展练习**

* 改变x、y、z三个变量的值
* 给x、y、z三个变量赋负值

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**警报箱**

**警报**: 不要给x、z变量赋大于127的值，也不要把大于[find value]赋给y变量。
Minecraft树莓派版的世界很小，赋值过大会导致游戏崩溃。 [check this]

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

##### 3.1.2 精确的移动玩家

-----------------------------------

**知识与技巧**

本练习中，我们将练习的知识和技巧:

* 变量
* 浮点类型
* 用浮点类型设置玩家位置
* 跟随指令
* Minecraft API

-----------------------------------

在这个练习里，我们将不会提供可以拷贝的代码，我们只会提供必要的帮助。别担心，这个练习和上一个非常相似，只有微小的差别。

在上一个练习里，我们学习了如何用整数设置玩家位置。
您可能已经注意到了，在窗口顶部的左侧显示的玩家位置是有小数位的。为了更精确的移动，在游戏里，玩家的位置是用浮点型存储的。

**指令**

参考上一个例子，按下面的步骤，用浮点型移动玩家的位置：
1. 创建一个名为 teleportPrecise.py的新文件 (确保与Minecraft API文件夹在同一目录下)
2. 打开 teleportPrecise.py，添加那两行连接到Minecraft游戏的代码
3. 定义三个变量x，y，z，并用赋给他们浮点型的值
4. 添加这行代码 mc.player.setPos(x,y,z)
5. 打开Minecraft游戏，运行代码

注意mc.player.setPos(x,y,z)和上个练习中mc.player.setTilePos(x,y,z)的不同：

* setPos(x,y,z) 使用浮点型设置玩家位置
* setTilePos(x,y,z) 使用整型

**扩展练习**

* 改变x,y,z变量的值，赋值时混合整数和负数
* 看看修改变量，只保留小数点前的数时会发生什么

##### 3.1.2 瞬间移动之旅

-----------------------------------

**知识与技巧**

本练习中，我们将练习的知识和技巧:

* 重用代码
* 设置玩家的位置
* 改变变量值
* 定时
-----------------------------------

在这个练习里我们将试验改变变量的值。我们将复用第一个练习里的部分代码，来穿越地图移动玩家到多个位置。玩家将移动到一个位置，然后等待几秒，再移动到另外的位置。

为了完成这个练习，我们将向你展示如何让Python暂停几秒。

**指令**

我们将使用第一个练习的代码。为了方便起见，我们把它拷贝到了这里。如果你想使用第二个练习里的代码，也没有问题。

	1. #connect to Minecraft
	2. import mcpi.minecraft as minecraft
	3. mc = minecraft.Minecraft.create()
	4. 	
	5. ”””set x,y and z variables
	6. to represent coordinates”””
	7. x = 10
	8. y = 11
	9. z = 12
	10. 	
	11. #change the player’s position
	12. mc.player.setTilePos(x,y,z)

让我们开始吧。像往常一样，请执行下列操作。因为所有的练习都需要这些步骤，所以从现在起，我们不再告诉你该怎么做了。

1. 像往常那样创建一个新文件，文件的命名要能简单的说明它的目的，在这个练习中使用tour.py
2. 确保Minecraft API在相同的目录下
3. 用文本编辑器打开文件

现在让我们开始编辑代码：

1. 拷贝teleport.py的代码到tour.py
2. 在第4行，增加下列代码：import time
3. 在第11行，增加下列代码：time.sleep(5)
4. 把第5行到第10行的代码，拷贝到第12行后面
5. 改变13、14、15行，x,y,z变量的值
6. 打开Minecraft游戏，并运行代码

你将看到玩家移动到第一个位置，然后等待五秒，然后移动到第二个位置。time.sleep(5)，这行代码让Python暂停了五秒。

**扩展练习**

暂停不同的时间
拷贝代码，按你的想法，让玩家移动多次
只改变一个变量，你不用每次都要改变所有的变量

##### 3.1.4 阻止打碎块

-----------------------------------

**知识与技巧**

本练习中，我们将练习的知识和技巧:

* 布尔值
* 不可改变的块（Immutable Blocks）
* 解决问题

-----------------------------------

这个有个不错的简单任务来结束本章的练习。在Minecraft中很容易打碎块。当你想破坏什么东西的时候，这很有用。但是如果你花费了很多时间建造的很酷的什么东西，被破坏了，那就很烦人了。在这个练习中，我们可以让玩家无法搞破坏。

指令（Instructions）

通过把变量world_immutable设置成True，你可以让块变成不可更改的。不可更改意味着不能改变。

你需要如下的代码：

	1.	import mcpi.minecraft as minecraft
	2. mc = minecraft.Minecraft.create()
	3. 
	4. mc.setting(world_immutable, True)

创建这段程序并运行它之后，会发现你已经无法打碎各种块了。

你现在的任务是拷贝这段程序到新的文件里，修改它，让玩家可以打碎块。
提示：那里有一个布尔值。

**扩展练习**

试着射一支箭出去。看看会发生什么？你想想为什么会这样？

