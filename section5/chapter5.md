## 第5章：字符串与控制台输出

我们已经看过三种变量类型了：整型、浮点型、布尔型。本章介绍另一种数据类型：字符串型。

整型和浮点型存储的是数字数据，布尔型存储真和假（True and False）的情况。我们还需要存储文字和符号。这就需要字符串型。

字符串是用来存储文字、符号、数字的数据类型。本章将介绍如何使用字符串型。

展示数据共用户是程序的必要功能。直到现在，你还不能让Python输出数据给用户。现在我们将学习如何输出数据到控制台。

#### 5.1 Minecraft练习

本章我们将涉及字符串和控制台的内容。你已经学习了如何使用字符串类型，能打印什么东西到控制台，也可以从控制台获取输入。所有这些都能跟Minecraft API结合起来。

本章我们也会介绍函数。如果你的眼光够犀利，你可能已经在前面的章节里见到过函数了。Minecraft API就是函数的例子。它们是可重复使用的代码块，它们让你更轻松的完成了任务。非常酷，是吧？

我们将要进行的这一系列练习，依赖本章以及之前章节的知识。你将会学到，用字符创打印数据到Minecraft聊天窗口，从控制台输入数据去创造Minecraft世界里的物品。

##### 5.1.1 Hello Minecraft World

-----------------------------------

**知识与技巧**

本练习中，我们将练习的知识和技巧:

* 字符串
* Minecraft 聊天窗口
* 输出

-----------------------------------

Minecraft树莓派版有一个聊天窗口。目前使用这个聊天窗口的唯一方式就是调用API。这非常容易。我们只需要用到postToChat()函数。这个函数只用一个字符串做参数，并把字符创发送到Minecraft聊天窗口。下面的代码将发送“Hello Minecraft World”：

	1. import mcpi.minecraft as minecraft
	2. mc = minecraft.Minecraft.create()
	3. 
	4. mc.postToChat(”Hello Minecraft World”)

**指令**

你的任务是，修改发送到聊天窗口的消息，改成任何你想说的。

如果你能连接到其他树莓派版的Minecraft上，那么试着发送消息给其他人。（指南，在页面上连接其他的树莓派版Minecraft或PE版【哪里能找到这个指南呢】）

这不是最简单的聊天方式？在接下来的练习中，我们将会改进我们的程序。

**扩展练习**

当你快乐的聊天的时候，试试这些扩展任务：

* 打印玩家下方的块的类型
* 打印玩家的坐标

##### 5.1.2 输入你的消息

-----------------------------------

**知识与技巧**

本练习中，我们将练习的知识和技巧:

* 字符串
* 输出
* 输入
* Minecraft聊天窗口

-----------------------------------

我们来把聊天变得更容易些。我们不在把聊天消息写到程序里，我们可以从控制台里输入聊天消息。

**指令**

跟着下面的步骤创建聊天程序，从控制台里输入消息：

1. 创建一个变量，从下面的语句中取值:
	raw_input(”Enter your message: ”)
2. 用你的输入做参数，调用mc.PostToChat()函数
3. 运行你的代码，你将从控制台里看到一行提示：”Enter your message: ”
4. 在控制台里，输入你的消息，然后回车
5. 你将看到你的消息，出现在聊天窗口。

别忘了头两行连接Minecraft的代码！

现在看看，比起硬编码到程序里的方式，现在的聊天方式是不是容易多了。好的，我们已经在这学到了些东西。

**扩展练习**

* 把一些字符串和用户的输入连接在一起发送到聊天窗口
* 多次调用raw_input函数，从用户那里收集不同的信息，发送到聊天窗口

##### 5.1.3 用户名称

-----------------------------------

**知识与技巧**

本练习中，我们将练习的知识和技巧:

* 字符串
* 输出
* 输入
* Minecraft聊天窗口
* 连接
* 大写

-----------------------------------

当你和两个以上的朋友一起玩Minecraft时，你可能会疑惑，聊天窗口的消息是发的。这里有一个显而易见的解决方案，就是把用户的名字放在聊天消息的开头。在这个练习里，你将修改上一练习的代码，在所有的消息里加入用户名。

**指令**

这次更具挑战。在你上个练习写的程序里，加入以下功能：

* 在输入消息前，先要求输入用户名
* 发送聊天消息时，把之前获得的用户名，加到聊天消息的前面

发送的聊天消息会有这样的格式：“DAVE: I need diamonds.”

**扩展练习**

* 如果输入名字时输入空回发生什么？你认为为什么会这样？
* 把用户名转换成小写

##### 5.1.4 疯狂字谜（[Mad Libs](https://en.wikipedia.org/wiki/Mad_Libs)）

-----------------------------------

**知识与技巧**

本练习中，我们将练习的知识和技巧:

* 字符串
* 输出
* 输入
* 占位符

-----------------------------------

我们都知道，疯狂字谜就是替换歌曲中的短语或词，制造出一种滑稽的效果。例如，把《铃儿响叮当》里的铃铛和雪橇，替换成小鸡和字母表。试着搜索一些疯狂字谜的有趣例子。我们将开发出我们自己版本的疯狂字谜，然后把结果发送到Minecraft聊天窗口。

**指令**

用占位符 %s替换《铃儿响叮当》（或其他歌曲）里的一些词，拿用户随机输入的词替换他们。把结果发布到聊天窗口。

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**警报箱**

**注意**: raw_input()可以按你的想法在程序里多次使用。开发你的疯狂猜词时，用这个函数获得你想要的输入。 

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

##### 5.1.5 用输入创建一个块

-----------------------------------

**知识与技巧**

本练习中，我们将练习的知识和技巧:

* 整型
* 块
* 输入
* 坐标

-----------------------------------

input()函数可以让你从控制台输入整数。多次使用这个函数，我们可以从命令行里获得多个变量，用这些变量做参数，就可以创建块了。让我们开始做吧。

**指令**

利用从控制台输入的数据创建块。你需要从控制台获得4个变量值。其中三个是坐标，还有一个是块类型。然后用setBlock()创建块。

**扩展练习**

修改你的代码，利用输入的数据做以下功能：

* 创建一个块
* 创建多个块
* 移动玩家
* 利用输入值，建造空心长立方体
* 打印块类型

做以上所有你能做的。以上这些都是很有用的，尤其是在测试程序的时候，他们可以帮你确认一些事情。

##### 5.1.6 冲刺记录（Sprint Record）

-----------------------------------

**知识与技巧**

本练习中，我们将练习的知识和技巧:

* 减法
* 定时
* 连接
* 坐标

-----------------------------------

这次练习综合了你在之前学到的变量和数学操作，以及发送消息到聊天窗口。

此次练习比之前更具挑战。也就是说我们会涵盖所有你学过的知识来创建这个程序。

这个程序要看看在10秒内，玩家能走出去多远，并且把结果显示在聊天窗口里。

**指令**

这里是创建这个程序的分步指南：

* 用惯用的方式连接Minecraft·
* 获得玩家的当前坐标，并创建一个变量记录这个坐标
* 在玩家用键盘想一个方向跑的时候，等待10秒钟
* 获得玩家心得坐标，并保存在一个新的变量里
* 比较开始的坐标和结束的坐标，并把结果输出到聊天窗口
* 结果请遵照一下格式“The player has moved x: 10, y: 6 and z: -3”

如果运行程序的时候，你发现不能很快的切换游戏窗口和命令号窗口，可以试着在第二部之前增加三秒的倒计时。并把倒计时打印到聊天窗口。

**扩展练习**

* 修改控制台输出，以便能显示移动的距离

#### 5.2 字符串

字符串和文本差不多是一样的。你的程序需要用到词组或句子的时候，你得使用字符串。

在字符串类型中，你可以存储字母、数字、和符号。所有的字符串都被放在引号里。例如，这是一个字符串：

	1. ”Cats, cats everywhere and not a drop to drink.”

这也是字符串：

	1. ’Turn left after 200 yards!’

字符串中每一个单个的字母，数字、符号都被称作一个字符。所谓字符串，顾名思义，就是一串字符。

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**警报箱**

**注意**:在写字符串时，既可以用单引号'，也可以用双引号''。但是不能混合在一起，起始的引号与结束的引号要一致。

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**字符串**

*变量类型*

一种代表文本的变量类型。它是字符的组合，包括：字母、数字、符号。

**表达式**

	1.	”Your text in here”
	2.	’Your text in here’

**语句**

	1. name = ”Edward”
	2. address = ”64 Engl Drive, Southumbria, ST6 7HY”
	3. paragraph = ”Edward likes swimming. He would like to teach you how to swim.”

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

##### 5.2.1 子字符串（Substrings）

可以用数字对应字符串中每个字符的位置。这可以让你获得字符串中某个位置的字符

例如，如果你想获得用户名的首字母，你就可以只访问名字的第一个字母，忽略其他字母。

字符在字符串中的位置被称为字符的索引位置。

字符串的索引是从0开始的，而不是你可能期望的1。也就是说，字符串中的第一个字符的索引是0，第二个字符的索引是1，以此类推。如下所示，字符串“Cats”的位置索引：

	0|1|2|3
	C|a|t|s

从0开始数，看起来有点傻，但是这是有原因的。过去的计算机非常的缓慢，而且内存很小。从0开始数数能让它更快，更有效率一些。虽然现在的计算机都很快了，但是从0开始计数这个习惯还是保留了下来。

方括号被用来访问字符串中的字符。把你想访问字符的索引放在方括号中。例如，我们想访问某个用户名的首字母：

	1. name = ”Jim”
	2. initial = name[0] #值是 ”J”

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**子字符串**

*函数*

这个函数可以用字符在字符串中的位置索引，访问对应的字符。使用子字符串的时候，把方括号放在字符串变量的后面，把字符的位置索引值放在方括号里面。

**表达式**

	1. ”String”[index]

**语句**

	1. firstLetter = ”Cats”[0] #值是 ”C”
	2. #或者
	3. position = 3 #值是整数3
	4. fourthLetter = ”Cats”[position] #值是 s
	5. #或者
	6. name = ”Barry”
	7. initial = name[0] #值是 ”B”

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

#### 5.3 字符串函数和方法

Python里可重用的代码块被叫做函数和方法。可重用的意思是，程序员不用把相同代码一遍又一遍的重写。

方法和函数的区别很微妙，我们会在其他章节里做解释。

字符串有一系的函数和方法。这章，我们将了解以下四个：

	* len()
	* lower()
	* upper()
	* str()

##### 5.3.1 len()

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**len()**

*方法*

以整数类型，返回字符串的长度。字符串作为参数被放在这个方法的括号里。

**表达式**

	1. len(”String”)

**语句**

	1. lengthOfName = len(”Anny”)
	2. #变量lengthOfName的值是 4.
	3. #或者
	4. animal = ”Goose”
	5. animalLength = len(animal) #值是5

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

len()方法返回字符串的长度。使用它时，把字符串放到这个方法的括号中。

例如，我们想知道某个人的名字里有多少个字符：
	1. name = ”Humbaba”
	2. length = len(name) #值是 7

##### 5.3.2 .lower()

lower()方法让字符串里的字符都变成小写。换句话说，把字符串大写的字符，都替换成小写的。

我们使用len()的方法略有不同。我们把lower () 放在字符串的末尾，中间用一个句号分隔。这就是所谓的“点表示法”。

例如，把某人的名字都替换成小写：

	1. name = ”VIX”
	2. name = name.lower() #值是 ”vix”

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**lower()**

*方法*

把字符串里的字母转换成小写。

**表达式**

	1. ”String”.lower()

**语句**

	1. lowerCaseName = ”Pratap Jefferson”.lower() # 值是 ”pratap jefferson”
	2. #或者
	3. country = ”BRAZIL”
	4. country = country.lower() # 值是 ”brazil”

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

##### 5.3.3 .upper()

另外一个函数，让字符串里的字符都变成大写。

upper()方法的使用与lower()类似。把它放在字符串类型的后面，中间用句号分隔。例如：

	1. animal = ”fish”
	2. animal = animal.upper() # 值是 ”FISH”

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**upper()**

*方法*

把字符串里的字母转换成大写。

**表达式**

	1. ”String”.upper()

**语句**

	1. upperCaseName = ”Pratap Jefferson”.upper()  # 值是 ”PRATAP JEFFERSON”
	2. #或者
	3. country = ”Denmark”
	4. country = country.upper()  # 值是 ”DENMARK”

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

##### 5.3.4 str()

把一种类型转换成另一种类型是非常有用的。比如，有时候需要吧整数型转成字符型。

例如，有一个整数2，你想把它当成字符串来处理。这是很容易的：

	1. houseNumber = str(2)  # 值是 ”2”

你可以用同样的方式处理浮点型和布尔型。

当我们进行打印操作的时候，str() 函数会被经常用到。

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**str()**

*函数*

把非字符串类型转换成字符串。它可以用于，整数型，浮点型，布尔型等其他类型。使用时，把要转换的类型，放到此函数的括号中。

**表达式**

	1. str(value)

**语句**

	1. partGuests = str(12) # value of ”12”
	2. pi = str(3.14) # value of ”3.14”
	3. isFish = str(True)# value of ”True”

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

#### 5.4 打印

直到现在，我们只是创建了变量，并且修改了他们。展示数据给用户是用户交互的重要部分。这就是众所周知的输出，现在是时候让打印操作符出场了。

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**print**

*操作符*

打印语句是让字符串显示在控制台上。

**表达式**

	1. print value

**语句**

	1. sentence = ”These are not the droids you’re looking for”
	2. print sentence

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

打印命令输出数据到控制台。

如果你正在使用IDLE，这里说到的控制台就是交互式shell。打印的数据将在交互式shell里新起一行显示出来。如果你使用的是控制台或者Geany的内置控制台，打印的数据会在当前窗口另起一行显示。更多关于控制台的信息可以查看这里【在哪里？】

使用打印语句，要用print开头，然后跟着要打印的字符串：

	1. print ”String”

所以，如果我们想把"chocolate"这个词打印到控制台，我们的代码应该是这个样子的：

	1. print ”chocolate”

##### 5.4.1 打印字符串变量

打印时，可以用变量来代替具体的值。例如，我们有一个name字符串，想把它打印到控制台：

	1. name = ”Charles Christopher”
	2. print name

Charles Christopher会被输出到控制台。非常简单。

你一样可以用print 打印整型、浮点型、布尔型数据。

##### 5.4.2 连接字符串

很多时候，我们需要打印字符串和变量的组合。我们也可能要连接两个或更多的字符串。Python的连接操作符让这变得很容易。

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**连接操作符 +**

*操作符*

使用多个字符串时，连接操作符 + 可以让多个字符串拼成一个字符串。

**表达式**

	1. ”string” + ”string”

**语句**

	1. name = ”Gilgamesh”
	2. print ”Your name is ” + name

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

还记得之前的加法操作符吗？是的，就是这个 + 。它一般用来把数加在一起，但它也能用来连接字符串。例如：

	1. firstName = ”Charles”
	2. lastName = ”Christopher”
	3. print firstName + lastName

输出是CharlesChristoper。 在两个单词之间没有空格字符。我们可以把空格当成第三个字符串加进去，就像这样：

	1. print firstName + ” ” + lastName

如果我们想加入一段字符串，但不想声明新的变量怎么办？没关系，直接写入字符串就可以了，比如这样：

	1. print ”His name is ” + firstName + ” ” + lastName

这将输出”His name is Charles Christoper”。

##### 5.4.3 连接整型、浮点型、布尔型

连接和打印字符串之外的类型略有不同。

连接符的两边必须是字符串类型。在连接其他类型的时候，我们需要把它们转换成字符串。你知道我们该怎么做吗？

我们使用str()把其他类型转换成字符串（在前面我们介绍过str()）。例如：我们想要输出"Age: 23"：

	1. age = 23
	2. print ”Age: ” + str(age)

怎么不相加两个数，而是把它们连接在一起呢？很简单，还是str()方法：

	1. print str(19) + str(84) # 输出 1984	

对浮点型和布尔型，你也可以做相同的事情。

在一个语句中，连接符可以使用多次，例如：

	1. print ”The year is ” + str(19) + str(84)

##### 5.4.4 字符串里的占位符

有另外一种方式，可以在字符串里使用变量。这种方式就是用变量替换字符串里的占位符。它需要 % 操作符。

在字符串里，在你想用变量替换掉的位置写入 “%s”。然后在这个字符串后面加一个 % 号，最后再跟一个括号，括号里面是你想替换“%s”的变量。多个变量的话可以用逗号分隔。像这样：

	1. name = ”Townsen”	
	2. brothers = ”three”
	3. print ”I am %s. I have %s brothers.” % (name, brothers)
	
最后的输出是 ”I am Townsen. I have three brothers.”

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**占位符 %s**

*操作符*

操作符 %s 被当做占位符，以便用变量替换字符串里的内容。包含%s占位符的字符串后紧跟一个 % 符，然后是括号里变量的一个列表。你需要保证，变量的数量和占位符的数量一致。括号里的变量用逗号分隔。

**表达式**

	1. ”string %s” % (values)

**语句**

	1. noun = ”cheeses”
	2. verb = ”paying”
	3. print ”These are not the %s you’re %s for.” % (noun, verb)

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

##### 5.4.5 raw_input()

很多时候你希望为程序提供输入。这种程序与用户之间互动是非常重要的，它可以改变程序当前使用的数据。

到目前为止，所有的变量都被写死在程序里，当程序运行时，与用户没有任何交互。很希望能在程序运行的时候改变这些变量的值。

实现交互的方式之一，就是在程序里使用raw_input()函数。它会打印一条字符串到控制台，并且等待用户的输入。用户输入的值会被返回给程序。例如：

	1. name = raw_input(”What is your name?”)
	2. print name

这个例子里，“What is your name?”会被打印在控制台里，用户输入他的用户名，然后用户的输入又会被打印到控制台里。

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**raw_input()**

*函数*

这个方法，通过命令行，接收用户的输入的字符串。

**表达式**

	1. raw_input(”string”)

**语句**

	1. hats = raw_input(”How many hats do you have?”)
	2. print hats

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

##### 5.4.6 input()

类似于raw_input(), input()方法也能从命令行接收用户的输入。两者的不同之处是，raw_input()会把用户的输入转换成字符串，而input()则允许其他数据类型。

你可以用input()方法输入整型、浮点型、布朗型。其实也可以输入字符串，但是它们必须括在引号中。

	1. bill = 120
	2. people = input(”How many people are sharing the bill?”)
	3. print ”The cost each is ” + str(bill / people)

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

**input()**

*函数*

这个方法，通过命令行，接收用户的输入，包括了整数型、浮点型、布尔型。

**表达式**

	1. input(”string”)

**语句**

	1. hats = raw_input(”How many hats do you have?”)
	2. print hats

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

#### 5.5 日期和时间

Python提供了一些函数，让我们可以把日期和时间当成变量。就让我们简单的涉猎一下日期和时间函数吧。

与之前学习的字符串函数不同，日期和时间函数不在默认的Python程序里。它们存储在一个叫做模块的地方。一个模块是相似主题的函数的集合。为了使用模块，我们必须导入它们。

为了使用日期和时间函数，我们需要先加入如下语句：

	1. from datetime import datetime

##### 5.5.1 得到当前日期和时间

	1. from datetime import datetime
	2. datetime.now()
	3. datetime.hour()
	4. datetime.day()
	5. datetime.month()
	6. datetime.year()

